- When communication is interrupted, check that outgoing msgs do not accumulate in outgoing buffer
- Initial handshake very unstable with 3dr. BOXNAMES message beginning is truncated/doesn't come through.
Investigation shows that small packets (<=32 bytes) are reliable but success rate decreases starting with 64-byte packets:
packet size         error rate
16                  0
32                  0
64                  0.05 ?
72                  1/[15-20]
80                  1/12
96                  worse
128                 worst

Implementing some post-1.8 fixes seem to help a lot: https://github.com/Dronecode/SiK/commit/546e1ab09595ea5cff9bfd7bb912a4ae4c0202e0#diff-a940a548ba41bc988f99d51fd02f21de
- Show when vehicle armed/disarmed
- Variometer
- CF can issue $M! packets for error cases
- Replay: When an internal error happens, not related to the log file; it is trapped and the message says "invalid flight file"
- Licensing: Also add our own version number
    + flight instruments and many icons stolen from Cleanflight Configurator
    + calibrate icon stolen on the web

- Replay: visual indication of replay (pause/play, FF, REW ?)
- When ARMED, disable Configuration, Motor testing, receiver config?, Modes?, Dataflash
- Alarm: Altitude low and high alarms, RTH fence alarm, Amperage, mAh consumed, etc.
- App icon
- Sexy launch screen and connection page
- Map: Add pin for RTH location
- Map: Draw heading of drone on map (Arrow, triangle, ?). Allow tapping on drone annotation, change annotation when GPS Fix lost (blink?)
- Map: Tapping on map shows "Go There" button
- Follow Me: only works with Telemetry screen
- Telemetry (map?): Display active profile, battery Amps, mAh consumed/remaining, vertical speed, communication speed
- Settings: Map type (sat, hybrid, map)
- Backup / Restore
(- Telemetry-only mode (passive): MSP_BOXNAMES,MSP_STATUS,MSP_IDENT,MSP_RAW_IMU,MSP_ALTITUDE,MSP_RAW_GPS,MSP_RC,MSP_ATTITUDE,MSP_SERVO. "Almost nobody uses it...". Removed in 1.11?)
- Modes: "Plus" buttons don't work well because of frequent table updates
- Pre-flight checks page
- Ability to name models: use cleanflight UID and BT uuid to identify it. Alert levels settings (Alt, Amp, mAh, etc.) are specific to model

- Comm: Use FPV audio channel to transmit data (ImmersionRC EzOSD)

- Background mode: BLE supposedly only wakes up the app "if the peripheral delivers an update" (https://developer.apple.com/library/ios/documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/BackgroundExecution/BackgroundExecution.html#//apple_ref/doc/uid/TP40007072-CH4-SW54)
    Wi-Fi: must implement func application(_ application: UIApplication, performFetchWithCompletionHandler completionHandler: (UIBackgroundFetchResult) -> Void) in app delegate

DONE:
- Remove borders of text field in config and elsewhere. See Pages
- Replay: disable buttons and tabs that are N/A: Config, Motors, Receiver, Modes, calib, pid, dataflash, about
- Reset AircraftModel when connecting and when starting replay
- Record: For each session, display date
- Licensing: Put this in Settings.app (Acknoledgements)
    + map, tuning, (new calibrate), battery, signal icons "designed by Freepik" mandatory in credits
    + compass: <div>Icons made by <a href="http://www.flaticon.com/authors/yannick" title="Yannick">Yannick</a> from <a href="http://www.flaticon.com" title="Flaticon">www.flaticon.com</a>             is licensed by <a href="http://creativecommons.org/licenses/by/3.0/" title="Creative Commons BY 3.0">CC BY 3.0</a></div>
- MyUINavigationController "Back" button detector doesn't work if launched from "More..." VC
- Units: metrics / imperial
- Record: move to Settings. "Log flight data" on/off will record flight data for every flight
- Replay: dump full AircraftModel at start of session.
- Finish Settings: detect pref changes, set default prefs, etc.
- Record: For each session, display location, distance, duration, max alt, ... (See DJI GO)
- Alarms: GPS Fix and Battery Low only checked in Telemetry VC
- Comm: Detect when no more data is coming in, display alert
- Comm: AppDelegate timer should not be on main queue -> when UI is busy, timer is not firing. -> solution: Main run loop, yes, but not in default mode
- TCP: Connection timeout is triggered if disconnecting within 5 secs
- TCP: Need to be able to cancel connection b/c it sometimes spins forever
- TCP: Connection timeout doesn't work if host is unreachable to start with (bogus dns name) -> Network lost in reachability
- TCP: Access violation due to reachability callback being called after connection is closed
Disconnected drone+dongle. Cannot dismiss "Connection lost. Reconnecting". Log:
2016-01-13 00:25:16.649 Cleanflight Configurator[6171:1715806] Bandwidth in: 0.0 kbps (0%)
2016-01-13 00:25:17.649 Cleanflight Configurator[6171:1715806] Bandwidth in: 0.0 kbps (0%)
2016-01-13 00:25:18.650 Cleanflight Configurator[6171:1715806] Bandwidth in: 0.0 kbps (0%)
2016-01-13 00:25:19.345 Cleanflight Configurator[6171:1724301] NSStreamEvent.ErrorOccurred: <__NSCFOutputStream: 0x1703022e0>
2016-01-13 00:25:19.346 Cleanflight Configurator[6171:1724301] Connecting...
2016-01-13 00:25:19.593 Cleanflight Configurator[6171:1724301] Communication closed
2016-01-13 00:27:49.624 Cleanflight Configurator[6171:1715806] NSStreamEvent.ErrorOccurred: <__NSCFOutputStream: 0x1743044a0>
2016-01-13 00:27:49.625 Cleanflight Configurator[6171:1715806] Communication error

Then BAD_ACCESS_EXCEPTION in reachability callback
- Comm: 0.5 sec receive timeout is too short. 0.75 -> 1 sec?
- Comm: Disconnecting with "no data received" dialog visible, doesn't hide it
- Telemetry2: Need to retrieve Misc(?) for battery ranges
- Telemetry: Time counter since arming
- Comm: Test 3DR Telemetry radio (= HKPilot tranceiver telemetry)

